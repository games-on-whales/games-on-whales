antoraSearch.initSearch(lunr, {"index":{"version":"2.3.9","fields":["title","name","text","component"],"fieldVectors":[["title/1",[0,7.407]],["name/1",[1,0.75]],["text/1",[0,0.939,2,3.185,3,3.185,4,1.887]],["component/1",[0,0.293]],["title/2-1",[5,11.849]],["name/2-1",[]],["text/2-1",[]],["component/2-1",[]],["title/2-2",[6,14.734,7,11.574]],["name/2-2",[]],["text/2-2",[]],["component/2-2",[]],["title/2",[4,11.574,8,14.734]],["name/2",[1,0.75]],["text/2",[5,0.486,6,0.777,7,0.996,8,1.269,9,0.777,10,0.777,11,1.03,12,1.03,13,0.777,14,1.03,15,1.03,16,0.996,17,2.131,18,1.03,19,1.607,20,2.193,21,2.044,22,1.855,23,0.777,24,1.682,25,1.607,26,1.269,27,1.005,28,1.269,29,1.03,30,1.607,31,1.682,32,1.03,33,1.03,34,1.03,35,1.03,36,1.03,37,1.03,38,0.61,39,1.682,40,1.03,41,1.607,42,1.03,43,2.131,44,1.03,45,0.777,46,1.03,47,1.03,48,0.777,49,0.777,50,1.03,51,1.03,52,0.777,53,1.03,54,1.682,55,1.03,56,1.269,57,1.03,58,1.03,59,0.777,60,1.03]],["component/2",[0,0.293]],["title/3-1",[5,11.849]],["name/3-1",[]],["text/3-1",[]],["component/3-1",[]],["title/3-2",[61,5.759,62,14.734]],["name/3-2",[]],["text/3-2",[]],["component/3-2",[]],["title/3-3",[61,5.759,63,14.734]],["name/3-3",[]],["text/3-3",[]],["component/3-3",[]],["title/3-4",[38,11.574,61,5.759]],["name/3-4",[]],["text/3-4",[]],["component/3-4",[]],["title/3-5",[61,5.759,64,14.734]],["name/3-5",[]],["text/3-5",[]],["component/3-5",[]],["title/3-6",[16,9.468,61,4.711,65,12.053]],["name/3-6",[]],["text/3-6",[]],["component/3-6",[]],["title/3",[27,11.849]],["name/3",[27,0.469]],["text/3",[0,0.302,4,1.137,5,0.272,7,0.342,9,0.436,10,0.436,13,0.436,16,0.608,19,0.436,20,1.735,21,1.602,22,0.436,23,0.774,25,0.774,26,0.436,27,0.652,28,1.85,30,0.774,38,0.608,41,1.043,45,1.264,48,0.436,49,0.774,52,0.436,56,1.043,59,0.436,61,0.762,62,1.043,63,0.774,64,0.436,65,0.436,66,0.577,67,0.577,68,1.025,69,0.577,70,0.577,71,0.577,72,0.577,73,0.577,74,0.577,75,0.577,76,1.025,77,0.577,78,1.675,79,1.675,80,1.025,81,1.675,82,0.577,83,0.577,84,1.025,85,0.577,86,0.577,87,0.577,88,1.383,89,1.025,90,0.577,91,0.577,92,1.675,93,0.577,94,1.383,95,1.383,96,0.577,97,1.383,98,0.577,99,1.675,100,1.025,101,0.577,102,1.383,103,1.025,104,1.025,105,1.383,106,0.577,107,1.025,108,0.577,109,0.577,110,0.577,111,0.577,112,0.577,113,1.025,114,0.577,115,0.577,116,0.577,117,0.577,118,0.577,119,1.025,120,0.577,121,1.025,122,0.577,123,1.025,124,0.577,125,0.577,126,0.577,127,0.577,128,0.577,129,0.577,130,0.577,131,0.577,132,0.577,133,0.577,134,0.577,135,0.577,136,0.577,137,0.577,138,0.577,139,0.577]],["component/3",[0,0.293]]],"invertedIndex":[["",{"_index":20,"title":{},"name":{},"text":{"2":{},"3":{}},"component":{}}],["0",{"_index":133,"title":{},"name":{},"text":{"3":{}},"component":{}}],["1",{"_index":62,"title":{"3-2":{}},"name":{},"text":{"3":{}},"component":{}}],["128",{"_index":47,"title":{},"name":{},"text":{"2":{}},"component":{}}],["2",{"_index":63,"title":{"3-3":{}},"name":{},"text":{"3":{}},"component":{}}],["3",{"_index":38,"title":{"3-4":{}},"name":{},"text":{"2":{},"3":{}},"component":{}}],["4",{"_index":64,"title":{"3-5":{}},"name":{},"text":{"3":{}},"component":{}}],["47984",{"_index":29,"title":{},"name":{},"text":{"2":{}},"component":{}}],["47989",{"_index":18,"title":{},"name":{},"text":{"2":{}},"component":{}}],["47998",{"_index":55,"title":{},"name":{},"text":{"2":{}},"component":{}}],["47999",{"_index":44,"title":{},"name":{},"text":{"2":{}},"component":{}}],["48000",{"_index":58,"title":{},"name":{},"text":{"2":{}},"component":{}}],["48010",{"_index":35,"title":{},"name":{},"text":{"2":{}},"component":{}}],["5",{"_index":65,"title":{"3-6":{}},"name":{},"text":{"3":{}},"component":{}}],["6",{"_index":11,"title":{},"name":{},"text":{"2":{}},"component":{}}],["ae",{"_index":45,"title":{},"name":{},"text":{"2":{},"3":{}},"component":{}}],["app",{"_index":32,"title":{},"name":{},"text":{"2":{}},"component":{}}],["ask",{"_index":83,"title":{},"name":{},"text":{"3":{}},"component":{}}],["audio",{"_index":57,"title":{},"name":{},"text":{"2":{}},"component":{}}],["authent",{"_index":69,"title":{},"name":{},"text":{"3":{}},"component":{}}],["avail",{"_index":31,"title":{},"name":{},"text":{"2":{}},"component":{}}],["back",{"_index":97,"title":{},"name":{},"text":{"3":{}},"component":{}}],["backend",{"_index":87,"title":{},"name":{},"text":{"3":{}},"component":{}}],["befor",{"_index":118,"title":{},"name":{},"text":{"3":{}},"component":{}}],["between",{"_index":77,"title":{},"name":{},"text":{"3":{}},"component":{}}],["bit",{"_index":48,"title":{},"name":{},"text":{"2":{},"3":{}},"component":{}}],["certif",{"_index":81,"title":{},"name":{},"text":{"3":{}},"component":{}}],["certificate_signatur",{"_index":114,"title":{},"name":{},"text":{"3":{}},"component":{}}],["challeng",{"_index":100,"title":{},"name":{},"text":{"3":{}},"component":{}}],["challengerespons",{"_index":109,"title":{},"name":{},"text":{"3":{}},"component":{}}],["check",{"_index":56,"title":{},"name":{},"text":{"2":{},"3":{}},"component":{}}],["client",{"_index":28,"title":{},"name":{},"text":{"2":{},"3":{}},"component":{}}],["client_cert",{"_index":126,"title":{},"name":{},"text":{"3":{}},"component":{}}],["client_hash",{"_index":121,"title":{},"name":{},"text":{"3":{}},"component":{}}],["client_pairing_secret",{"_index":127,"title":{},"name":{},"text":{"3":{}},"component":{}}],["client_public_cert_signatur",{"_index":129,"title":{},"name":{},"text":{"3":{}},"component":{}}],["client_secret",{"_index":130,"title":{},"name":{},"text":{"3":{}},"component":{}}],["connect",{"_index":139,"title":{},"name":{},"text":{"3":{}},"component":{}}],["contain",{"_index":123,"title":{},"name":{},"text":{"3":{}},"component":{}}],["content",{"_index":10,"title":{},"name":{},"text":{"2":{},"3":{}},"component":{}}],["control",{"_index":40,"title":{},"name":{},"text":{"2":{}},"component":{}}],["cryptographi",{"_index":74,"title":{},"name":{},"text":{"3":{}},"component":{}}],["current",{"_index":14,"title":{},"name":{},"text":{"2":{}},"component":{}}],["data",{"_index":51,"title":{},"name":{},"text":{"2":{}},"component":{}}],["decrypt",{"_index":95,"title":{},"name":{},"text":{"3":{}},"component":{}}],["deriv",{"_index":90,"title":{},"name":{},"text":{"3":{}},"component":{}}],["document",{"_index":3,"title":{},"name":{},"text":{"1":{}},"component":{}}],["encrypt",{"_index":30,"title":{},"name":{},"text":{"2":{},"3":{}},"component":{}}],["enet",{"_index":42,"title":{},"name":{},"text":{"2":{}},"component":{}}],["everyth",{"_index":117,"title":{},"name":{},"text":{"3":{}},"component":{}}],["exchang",{"_index":22,"title":{},"name":{},"text":{"2":{},"3":{}},"component":{}}],["extra",{"_index":52,"title":{},"name":{},"text":{"2":{},"3":{}},"component":{}}],["few",{"_index":75,"title":{},"name":{},"text":{"3":{}},"component":{}}],["final",{"_index":120,"title":{},"name":{},"text":{"3":{}},"component":{}}],["fine",{"_index":132,"title":{},"name":{},"text":{"3":{}},"component":{}}],["follow",{"_index":103,"title":{},"name":{},"text":{"3":{}},"component":{}}],["gamestream",{"_index":15,"title":{},"name":{},"text":{"2":{}},"component":{}}],["gcm",{"_index":46,"title":{},"name":{},"text":{"2":{}},"component":{}}],["gener",{"_index":99,"title":{},"name":{},"text":{"3":{}},"component":{}}],["go",{"_index":6,"title":{"2-2":{}},"name":{},"text":{"2":{}},"component":{}}],["hash",{"_index":102,"title":{},"name":{},"text":{"3":{}},"component":{}}],["here",{"_index":66,"title":{},"name":{},"text":{"3":{}},"component":{}}],["http",{"_index":16,"title":{"3-6":{}},"name":{},"text":{"2":{},"3":{}},"component":{}}],["index",{"_index":1,"title":{},"name":{"1":{},"2":{}},"text":{},"component":{}}],["inform",{"_index":24,"title":{},"name":{},"text":{"2":{}},"component":{}}],["input",{"_index":50,"title":{},"name":{},"text":{"2":{}},"component":{}}],["insecur",{"_index":71,"title":{},"name":{},"text":{"3":{}},"component":{}}],["insert",{"_index":84,"title":{},"name":{},"text":{"3":{}},"component":{}}],["involv",{"_index":13,"title":{},"name":{},"text":{"2":{},"3":{}},"component":{}}],["key",{"_index":92,"title":{},"name":{},"text":{"3":{}},"component":{}}],["main",{"_index":12,"title":{},"name":{},"text":{"2":{}},"component":{}}],["make",{"_index":136,"title":{},"name":{},"text":{"3":{}},"component":{}}],["moonlight",{"_index":4,"title":{"2":{}},"name":{},"text":{"1":{},"3":{}},"component":{}}],["need",{"_index":25,"title":{},"name":{},"text":{"2":{},"3":{}},"component":{}}],["network",{"_index":72,"title":{},"name":{},"text":{"3":{}},"component":{}}],["next",{"_index":7,"title":{"2-2":{}},"name":{},"text":{"2":{},"3":{}},"component":{}}],["now",{"_index":116,"title":{},"name":{},"text":{"3":{}},"component":{}}],["obtain",{"_index":122,"title":{},"name":{},"text":{"3":{}},"component":{}}],["order",{"_index":94,"title":{},"name":{},"text":{"3":{}},"component":{}}],["origin",{"_index":124,"title":{},"name":{},"text":{"3":{}},"component":{}}],["otherwis",{"_index":134,"title":{},"name":{},"text":{"3":{}},"component":{}}],["over",{"_index":41,"title":{},"name":{},"text":{"2":{},"3":{}},"component":{}}],["overview",{"_index":5,"title":{"2-1":{},"3-1":{}},"name":{},"text":{"2":{},"3":{}},"component":{}}],["pair",{"_index":27,"title":{"3":{}},"name":{"3":{}},"text":{"2":{},"3":{}},"component":{}}],["pairingsecret",{"_index":111,"title":{},"name":{},"text":{"3":{}},"component":{}}],["password",{"_index":85,"title":{},"name":{},"text":{"3":{}},"component":{}}],["phase",{"_index":61,"title":{"3-2":{},"3-3":{},"3-4":{},"3-5":{},"3-6":{}},"name":{},"text":{"3":{}},"component":{}}],["pin",{"_index":89,"title":{},"name":{},"text":{"3":{}},"component":{}}],["plaincert",{"_index":98,"title":{},"name":{},"text":{"3":{}},"component":{}}],["port",{"_index":36,"title":{},"name":{},"text":{"2":{}},"component":{}}],["privat",{"_index":112,"title":{},"name":{},"text":{"3":{}},"component":{}}],["prompt",{"_index":82,"title":{},"name":{},"text":{"3":{}},"component":{}}],["protocol",{"_index":8,"title":{"2":{}},"name":{},"text":{"2":{}},"component":{}}],["public",{"_index":23,"title":{},"name":{},"text":{"2":{},"3":{}},"component":{}}],["question",{"_index":67,"title":{},"name":{},"text":{"3":{}},"component":{}}],["quit",{"_index":73,"title":{},"name":{},"text":{"3":{}},"component":{}}],["randomli",{"_index":106,"title":{},"name":{},"text":{"3":{}},"component":{}}],["reach",{"_index":138,"title":{},"name":{},"text":{"3":{}},"component":{}}],["remot",{"_index":86,"title":{},"name":{},"text":{"3":{}},"component":{}}],["respons",{"_index":131,"title":{},"name":{},"text":{"3":{}},"component":{}}],["rtp",{"_index":54,"title":{},"name":{},"text":{"2":{}},"component":{}}],["rtsp",{"_index":34,"title":{},"name":{},"text":{"2":{}},"component":{}}],["run",{"_index":135,"title":{},"name":{},"text":{"3":{}},"component":{}}],["salt",{"_index":80,"title":{},"name":{},"text":{"3":{}},"component":{}}],["secret",{"_index":105,"title":{},"name":{},"text":{"3":{}},"component":{}}],["secur",{"_index":68,"title":{},"name":{},"text":{"3":{}},"component":{}}],["see",{"_index":59,"title":{},"name":{},"text":{"2":{},"3":{}},"component":{}}],["send",{"_index":79,"title":{},"name":{},"text":{"3":{}},"component":{}}],["sent",{"_index":108,"title":{},"name":{},"text":{"3":{}},"component":{}}],["server",{"_index":78,"title":{},"name":{},"text":{"3":{}},"component":{}}],["server_challeng",{"_index":107,"title":{},"name":{},"text":{"3":{}},"component":{}}],["server_secret",{"_index":115,"title":{},"name":{},"text":{"3":{}},"component":{}}],["serverchallengeresp",{"_index":110,"title":{},"name":{},"text":{"3":{}},"component":{}}],["set",{"_index":37,"title":{},"name":{},"text":{"2":{}},"component":{}}],["sha256",{"_index":101,"title":{},"name":{},"text":{"3":{}},"component":{}}],["sha256(server_challeng",{"_index":128,"title":{},"name":{},"text":{"3":{}},"component":{}}],["share",{"_index":91,"title":{},"name":{},"text":{"3":{}},"component":{}}],["sign",{"_index":113,"title":{},"name":{},"text":{"3":{}},"component":{}}],["signatur",{"_index":104,"title":{},"name":{},"text":{"3":{}},"component":{}}],["stage",{"_index":96,"title":{},"name":{},"text":{"3":{}},"component":{}}],["start",{"_index":26,"title":{},"name":{},"text":{"2":{},"3":{}},"component":{}}],["step",{"_index":76,"title":{},"name":{},"text":{"3":{}},"component":{}}],["store",{"_index":93,"title":{},"name":{},"text":{"3":{}},"component":{}}],["stream",{"_index":39,"title":{},"name":{},"text":{"2":{}},"component":{}}],["sure",{"_index":137,"title":{},"name":{},"text":{"3":{}},"component":{}}],["tabl",{"_index":9,"title":{},"name":{},"text":{"2":{},"3":{}},"component":{}}],["tcp",{"_index":17,"title":{},"name":{},"text":{"2":{}},"component":{}}],["trigger",{"_index":33,"title":{},"name":{},"text":{"2":{}},"component":{}}],["udp",{"_index":43,"title":{},"name":{},"text":{"2":{}},"component":{}}],["unencrypt",{"_index":19,"title":{},"name":{},"text":{"2":{},"3":{}},"component":{}}],["untrust",{"_index":70,"title":{},"name":{},"text":{"3":{}},"component":{}}],["us",{"_index":21,"title":{},"name":{},"text":{"2":{},"3":{}},"component":{}}],["user",{"_index":49,"title":{},"name":{},"text":{"2":{},"3":{}},"component":{}}],["verifi",{"_index":119,"title":{},"name":{},"text":{"3":{}},"component":{}}],["video",{"_index":53,"title":{},"name":{},"text":{"2":{}},"component":{}}],["we’ll",{"_index":88,"title":{},"name":{},"text":{"3":{}},"component":{}}],["wip",{"_index":2,"title":{},"name":{},"text":{"1":{}},"component":{}}],["wolf",{"_index":0,"title":{"1":{}},"name":{},"text":{"1":{},"3":{}},"component":{"1":{},"2":{},"3":{}}}],["work",{"_index":60,"title":{},"name":{},"text":{"2":{}},"component":{}}],["x509",{"_index":125,"title":{},"name":{},"text":{"3":{}},"component":{}}]],"pipeline":["stemmer"]},"store":{"documents":{"1":{"id":1,"text":"WIP documentation for Wolf and Moonlight.","title":"Wolf","component":"wolf","version":"","name":"index","url":"/wolf/index.html","titles":[]},"2":{"id":2,"text":"Table of Contents Overview Where to go next There are 6 main protocols involved in the current GameStream protocol: HTTP (TCP 47989) unencrypted 🔓 used to exchanged public information needed to start pairing clients HTTPS (TCP 47984) encrypted 🔐 only available to paired clients used to exchange available apps and trigger the start RTSP (TCP 48010) unencrypted 🔓 Used to exchange ports and settings for the next 3 streams Control over ENet (UDP 47999) encrypted 🔐 (using AES GCM 128 bit) Used to exchange user input data and extra stream information Video over RTP (UDP 47998) unencrypted 🔓 (needs checking) Audio over RTP (UDP 48000) could be encrypted 🔒 (needs checking) See how pairing works.","title":"Moonlight Protocols","component":"wolf","version":"","name":"index","url":"/wolf/protocols/index.html","titles":[{"text":"Overview","hash":"_overview","id":1},{"text":"Where to go next","hash":"_where_to_go_next","id":2}]},"3":{"id":3,"text":"Table of Contents Overview Phase 1 Phase 2 Phase 3 Phase 4 Phase 5 (HTTPS) Here we start with a question: How can we securely authenticate an untrusted client over an insecure network? This involves quite a bit of cryptography and a few steps between the client (Moonlight) and the server (Wolf). Moonlight will send a salt and client certificate, users will see a prompt asking to insert the password on the remote server. On the backend, we’ll need the PIN to be inserted by the user. PIN and SALT will be used to derive a shared AES key that needs to be stored in order to be used to decrypt in the next phases. At this stage we only have to send back our public certificate (plaincert). Using the AES key that we generated in the phase 1 we have to decrypt the client challenge, We generate a SHA256 hash with the following: Decrypted challenge Server certificate signature Server secret: a randomly generated secret The hash + server_challenge will then be AES encrypted and sent as the challengeresponse Moonlight will send back a serverchallengeresp: an AES encrypted client hash, we have to send back the pairingsecret: using our private key we have to sign the certificate_signature + server_secret (generated in phase 2) We now have to use everything we exchanged before in order to verify and finally pair the clients. We’ll check the client_hash obtained at phase 3, it should contain the following: The original server_challenge The signature of the X509 client_cert The unencrypted client_pairing_secret We’ll check that SHA256(server_challenge + client_public_cert_signature + client_secret) == client_hash Then using the client certificate public key we should be able to verify that the client secret has been signed by Moonlight The response will contain: paired = 1, if all checks are fine paired = 0, otherwise This extra step will run over HTTPS in order to make sure that Moonlight can reach Wolf over a secure connection.","title":"Pairing","component":"wolf","version":"","name":"pairing","url":"/wolf/protocols/pairing.html","titles":[{"text":"Overview","hash":"_overview","id":1},{"text":"Phase 1","hash":"_phase_1","id":2},{"text":"Phase 2","hash":"_phase_2","id":3},{"text":"Phase 3","hash":"_phase_3","id":4},{"text":"Phase 4","hash":"_phase_4","id":5},{"text":"Phase 5 (HTTPS)","hash":"_phase_5_https","id":6}]}},"components":{},"componentVersions":{"wolf/":{"displayVersion":"default","title":"wolf","version":"","name":"wolf","asciidoc":{"attributes":{"env":"site","env-site":"","site-gen":"antora","site-gen-antora":"","attribute-missing":"warn","data-uri":null,"icons":"font","sectanchors":"","source-highlighter":"highlight.js","site-title":"Games On Whales"},"sourcemap":false,"extensions":[{}]},"url":"/wolf/index.html","navigation":[{"items":[{"content":"Wolf","url":"/wolf/index.html","urlType":"internal"}],"root":true,"order":0},{"items":[{"content":"Protocols","url":"/wolf/protocols/index.html","urlType":"internal","items":[{"content":"Pairing","url":"/wolf/protocols/pairing.html","urlType":"internal"}]}],"root":true,"order":1}]}}}})